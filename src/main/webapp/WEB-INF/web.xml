<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns="https://jakarta.ee/xml/ns/jakartaee"
	xsi:schemaLocation="https://jakarta.ee/xml/ns/jakartaee https://jakarta.ee/xml/ns/jakartaee/web-app_5_0.xsd"
	version="5.0">

	<display-name>Servlet and JSPs for Youth Oppourtunities in Eswatini</display-name>

	<description>
		This web application stores and shares youth opportunities in Eswatini
		using a controller servlet, JSPs and session persistence
	</description>

	<!-- Application-wide database configuration -->
    <context-param>
        <param-name>RdbDriverClass</param-name>
        <param-value>com.mysql.cj.jdbc.Driver</param-value>
    </context-param>
    <context-param>
        <param-name>RdbUrl</param-name>
        <param-value>jdbc:mysql://192.168.124.100:3306/siyamabuza_tl</param-value>
    </context-param>
    <context-param>
        <param-name>RdbUserId</param-name>
        <param-value>siyamabuza_tl_app</param-value>
    </context-param>
    <context-param>
        <param-name>RdbPassword</param-name>
        <param-value>aiY6thaedo</param-value>
    </context-param>

	<!-- Register the database setup listener -->
    <listener>
        <listener-class>edu.skidmore.cs276.project.webapps.web.DatabaseSetupListener</listener-class>
    </listener>

	

	<servlet>
		<description>A servlet that manages opportunities</description>
		<display-name>Opportunities Maintenance</display-name>
		<servlet-name>opportunities</servlet-name>
		<servlet-class>edu.skidmore.cs276.project.webapps.web.ViewOpportunitiesServlet</servlet-class>
		<load-on-startup>1</load-on-startup>
	</servlet>

	<servlet-mapping>
		<servlet-name>opportunities</servlet-name>
		<url-pattern>/opportunities/*</url-pattern>
	</servlet-mapping>

	<!-- Servlet for regering a user -->
	<servlet>
		<servlet-name>RegisterServlet</servlet-name>
		<servlet-class>edu.skidmore.cs276.project.webapps.web.RegisterServlet</servlet-class>
	</servlet>
	<servlet-mapping>
		<servlet-name>RegisterServlet</servlet-name>
		<url-pattern>/register</url-pattern>
	</servlet-mapping>

		<!-- Login Filter Definition -->
    <filter>
        <filter-name>LoginFilter</filter-name>
        <filter-class>edu.skidmore.cs276.project.webapps.web.LoginFilter</filter-class>
    </filter>

    <!-- Login Filter Mapping -->
    <filter-mapping>
        <filter-name>LoginFilter</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

		<!-- Error Pages-->
    <error-page>
        <error-code>401</error-code>
        <location>/errorpages/401.jsp</location>
    </error-page>
	<error-page>
        <error-code>403</error-code>
        <location>/errorpages/403.jsp</location>
    </error-page>
	<error-page>
        <error-code>404</error-code>
        <location>/errorpages/404.jsp</location>
    </error-page>
	<error-page>
        <error-code>405</error-code>
        <location>/errorpages/500.jsp</location>
    </error-page>

	<!--Servlet for lohin and logout-->
	<servlet>
		<description>A servlet that manages Logging IN</description>
		<display-name>Oppourtunities Login</display-name>
		<servlet-name>login</servlet-name>
		<servlet-class>edu.skidmore.cs276.project.webapps.web.LoginServlet</servlet-class>
	</servlet>

	<servlet-mapping>
		<servlet-name>login</servlet-name>
		<url-pattern>/login</url-pattern>
	</servlet-mapping>

	<servlet>
		<servlet-name>LogoutServlet</servlet-name>
		<servlet-class>edu.skidmore.cs276.project.webapps.web.LogoutServlet</servlet-class>
	</servlet>

	<servlet-mapping>
		<servlet-name>LogoutServlet</servlet-name>
		<url-pattern>/logout</url-pattern>
	</servlet-mapping>

	
	<servlet>
		<description>A servlet that manages displaying opportunities</description>
		<display-name>Oppourtunities view</display-name>
		<servlet-name>viewopportunities</servlet-name>
		<servlet-class>edu.skidmore.cs276.project.webapps.web.ViewOpportunitiesServlet</servlet-class>
    	<load-on-startup>1</load-on-startup>
	</servlet>

	<servlet-mapping>
		<servlet-name>viewopportunities</servlet-name>
		<url-pattern>/viewopportunities</url-pattern>
	</servlet-mapping>

	<servlet>
		<description>A servlet that manages adding resources</description>
		<display-name>Add Resources</display-name>
		<servlet-name>addresource</servlet-name>
		<servlet-class>edu.skidmore.cs276.project.webapps.web.AddResourceServlet</servlet-class>
    	<load-on-startup>1</load-on-startup>
	</servlet>

	<servlet-mapping>
		<servlet-name>addresource</servlet-name>
		<url-pattern>/addresource</url-pattern>
	</servlet-mapping>

	<servlet>
		<description>A servlet that views available Grants</description>
		<display-name>Grants</display-name>
		<servlet-name>grants</servlet-name>
		<servlet-class>edu.skidmore.cs276.project.webapps.web.GrantsServlet</servlet-class>
    	<load-on-startup>1</load-on-startup>
	</servlet>

	<servlet-mapping>
		<servlet-name>grants</servlet-name>
		<url-pattern>/grants</url-pattern>
	</servlet-mapping>
	
	<servlet>
		<description>A servlet that views available Scholarships</description>
		<display-name>Scholarships</display-name>
		<servlet-name>scholarships</servlet-name>
		<servlet-class>edu.skidmore.cs276.project.webapps.web.ScholarshipsServlet</servlet-class>
    	<load-on-startup>1</load-on-startup>
	</servlet>

	<servlet-mapping>
		<servlet-name>scholarships</servlet-name>
		<url-pattern>/scholarships</url-pattern>
	</servlet-mapping>

	<servlet>
		<description>A servlet that views available Jobs and Internships</description>
		<display-name>Jobs</display-name>
		<servlet-name>jobs</servlet-name>
		<servlet-class>edu.skidmore.cs276.project.webapps.web.JobsServlet</servlet-class>
    	<load-on-startup>1</load-on-startup>
	</servlet>

	<servlet-mapping>
		<servlet-name>jobs</servlet-name>
		<url-pattern>/jobs</url-pattern>
	</servlet-mapping>

	<!-- Delete Opportunities Controller -->
	<servlet>
		<description>A servlet that deletes a opportunities from database</description>
		<display-name>Delete an opportunity from the database</display-name>
		<servlet-name>deleteOpportunity</servlet-name>
		<servlet-class>edu.skidmore.cs276.project.webapps.web.DeleteOpportunityServlet</servlet-class>
		
		<load-on-startup>1</load-on-startup>
	</servlet>

	<servlet-mapping>
		<servlet-name>deleteOpportunity</servlet-name>
		<url-pattern>/deleteOpportunity/*</url-pattern>
	</servlet-mapping>


	<!-- Preload the JSP -->
	<servlet>
		<servlet-name>Opportunities-jsp</servlet-name>
		<jsp-file>/WEB-INF/hiddenjsp/opportunities.jsp</jsp-file>
		<load-on-startup>1</load-on-startup>
	</servlet>

	
	<!-- Handle persisting the tasklist when a session expires -->
	<listener>
		<listener-class>
			edu.skidmore.cs276.project.webapps.web.OpportunitiesSessionListener
		</listener-class>
	</listener>

	<session-config>
		<session-timeout>10</session-timeout>
	</session-config>
</web-app>
